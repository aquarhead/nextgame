<!doctype html>
<html>

{% include 'head.html' %}

<body>
  <section class="hero is-info">
    <div class="hero-body">
      <h1 class="title">
        nextgame :: {{ team.name }}
      </h1>
      <p class="subtitle">
        Manage players, and more (to come)..
      </p>
    </div>
  </section>

  <section class="section">
    {% if team.next_game %}
    <div class="container is-max-desktop mb-2">
      <form action="/admin/{{ key }}/{{ team.secret }}/reset_game" method="post">
        <div class="field">
          <div class="control">
            <button type="submit" class="button is-medium is-warning">
              Force reset game
            </button>
          </div>
        </div>
      </form>
    </div>
    {% endif %}

    <div class="container is-max-desktop">
      <form action="/admin/{{ key }}/{{ team.secret }}/cron" method="post">
        <div class="field">
          <label class="label">Game auto-expire cron</label>
          <div class="control">
            <input class="input" type="text" name="cron"
              value="{% if team.auto_expire_cron %}{{ team.auto_expire_cron }}{% endif %}">
          </div>
          <p class="help">Time to <b>EXPIRE</b> the game - set to a time after the game finishes. Use <a target="_blank"
              href="https://crontab.guru/">this</a>
            to help with the cron expression. (Note this does not affect existing games, you may need to manually reset
            it)</p>
        </div>

        <div class="field">
          <label class="label">Timezone</label>
          <div class="control">
            <input class="input" type="text" name="tz" value="{{ team.timezone }}">
          </div>
          <p class="help">Use "TZ Identifier" listed <a target="_blank"
              href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones#List">here</a>.</p>
        </div>

        <div class="field">
          <div class="control">
            <button type="submit" class="button is-link is-medium">Save</button>
          </div>
        </div>
      </form>
    </div>
  </section>

  <section class="section pt-0">
    <div class="container is-max-desktop mb-2">
      <form action="/admin/{{ key }}/{{ team.secret }}/player" method="post">
        <div class="field has-addons">
          <div class="control is-expanded">
            <input type="text" name="player_name" class="input is-medium" placeholder="Player name">
          </div>
          <div class="control">
            <button type="submit" class="button is-medium is-primary">
              Add player
            </button>
          </div>
        </div>
      </form>
    </div>

    <div class="container is-max-desktop">
      <table class="table is-bordered is-striped is-hoverable is-fullwidth">
        <thead>
          <tr>
            <th></th>
            <th>Manage</th>
          </tr>
        </thead>
        <tbody>
          {% for id, pn in team.players|items %}
          <tr>
            <th class="is-two-thirds">
              {{ pn }}
            </th>
            <td>
              <form action="/admin/{{ key }}/{{ team.secret }}/player/{{ id }}/delete" method="post">
                <button type="submit" class="button is-danger">
                  Delete
                </button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </section>

  {% include 'footer.html' %}
</body>

</html>
